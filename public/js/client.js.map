{"version":3,"sources":["client.js"],"names":["SOCKET_URL","constructor","console","send","handleOpen","sendNewMessage","evt","detail","document","sendNewGif","gifUrl","handleGif","payload","JSON"],"mappings":"AAAA,MAAA,UAAA,CAAiB;AAChBA,EAAAA,UAAAA,GAAU,qBAAVA;;AACAC,EAAAA,WAAAA,GAAW;AACVC,IAAAA,OAAAA,CAAAA,GAAAA,CAAAA,gBAAAA;AACA,SAAA,EAAA,GAAA,IAAU,SAAV,CAAU,KAAV,UAAA,CAAA;AAEA,SAAA,EAAA,CAAA,MAAA,GAAA,KAJa,UAIb,CAJU,CAAG;;AAMb,SAAA,EAAA,CAAA,SAAA,GAAA,KAAA,SAAA;AACA,SAAA,EAAA,CAAA,OAAA,GAAA,KAAA,WAAA;AACA;;AAEDC,EAAAA,IAAAA,GAAO,OAAH,IAAgB;AACnB,SAAA,EAAA,CAAA,IAAA,CAAA,OAAA;AADG,GAAJA;AAIAC,EAAAA,UAAAA,GAAa,IAAH,IAAa;AACtBF,IAAAA,OAAAA,CAAAA,GAAAA,CAAAA,iBAAAA,EAAAA,IAAAA;AADS,GAAVE;AAIAC,EAAAA,cAAAA,GAAiB,OAAH,IAAgB;AAC7B,UAAA,GAAMC,GAAG,IAAG,WAAH,CAAG,YAAH,EAAG;AAAgCC,MAAAA,MAAAA,EAAAA;AAAhC,KAAH,CAAT;AACAC,IAAAA,QAAAA,CAAAA,aAAAA,CAAAA,GAAAA;AAFa,GAAdH;AAIAI,EAAAA,WAAU,GAAG,OAACC,IAAW;AACxB,UAAA,GAAMJ,GAAG,IAAG,WAAH,CAAG,YAAH,EAA6B;AAAEC,MAAAA,MAAAA,EAAAA;AAAF,KAA7B,CAAT;AACAC,IAAAA,QAAAA,CAAAA,aAAAA,CAAAA,GAAAA;AAFS,GAAA;AAIVG,EAAAA,SAAAA,GAAY,GAAH,IAAY;AACpB,UAAA,OAAMC,GAAO,IAAGC,CAAAA,KAAH,CAAGA,GAAWP,CAA3B,IAAa,CAAb;AACAJ,IAAAA,OAAAA,CAAAA,GAAAA,CAAAA,sBAAAA,EAAAA,OAAAA;;AACA,QAAA,OAAIU,CAAAA,OAAJ,IAAA,SAAA,EAAA,CAEC;;;AACD,QAAA,OAAIA,CAAAA,OAAJ,IAAA,SAAA,EAAA;AACC,WAAA,WAAA,CAAA,OAAgBA,CAAhB,OAAA;AADD;;AAGCA,QAAAA,OAAO,CAAPA,OAAAA,IAAAA,SAAAA,EAAAA;AACA,WAAA,cAAA,CAAA,OAAA,CAAA,OAAA;KADAA,M;AAED,MAAA,OAAIA,CAAAA,QAAJ,CAAA,OAAA,CAAA,IAAA,IAAkC,KAAA,cAAA,CAAA,IAAA,CAAlC;AACC;AADD,GAXDD;AAeE,EAAA,WAAA,GAAA,KAAA,IAAA;AA3Cc,IAAA,OA8ChB,CAAA,KA9CgB,CA8ChB,cA9CgB,EA8ChB,KA9CgB;AA+ChB,GAJE;AA3Cc","sourcesContent":["class ChatClient {\n\tSOCKET_URL = 'ws://localhost:8080';\n\tconstructor() {\n\t\tconsole.log('new ChatClient');\n\t\tthis.ws = new WebSocket(this.SOCKET_URL);\n\n\t\tthis.ws.onopen = this.handleOpen;\n\t\t// this.ws.onmessage = this.handleMessage;\n\t\tthis.ws.onmessage = this.handleGif;\n\t\tthis.ws.onerror = this.handelError;\n\t}\n\n\tsend = (message) => {\n\t\tthis.ws.send(message);\n\t};\n\n\thandleOpen = (conn) => {\n\t\tconsole.log('connection open', conn);\n\t};\n\n\tsendNewMessage = (message) => {\n\t\tconst evt = new CustomEvent('addMessage', { detail: message });\n\t\tdocument.dispatchEvent(evt);\n\t};\n\tsendNewGif = (gifUrl) => {\n\t\tconst evt = new CustomEvent('addGif', { detail: gifUrl });\n\t\tdocument.dispatchEvent(evt);\n\t};\n\thandleGif = (evt) => {\n\t\tconst payload = JSON.parse(evt.data);\n\t\tconsole.log('received gif payload', payload);\n\t\tif (payload.clients != undefined) {\n\t\t\t//send event with client count\n\t\t}\n\t\tif (payload.gifUrl != undefined) {\n\t\t\tthis.sendNewGif(payload.gifUrl);\n\t\t} else if (payload.gifUrls != undefined) {\n\t\t\tpayload.gifUrls.forEach((gif) => this.sendNewGif(gif));\n\t\t}\n\t\tif (payload.message != undefined) {\n\t\t\tthis.sendNewMessage(payload.message);\n\t\t} else if (payload.messages != undefined) {\n\t\t\tpayload.messages.forEach((mesg) => this.sendNewMessage(mesg));\n\t\t}\n\t};\n\n\t// handleMessage = (evt) => {\n\t// \tconst payload = JSON.parse(evt.data);\n\t// \tconsole.log('received payload', payload);\n\t// \tif (payload.clients != undefined) {\n\t// \t\t//send event with client count\n\t// \t}\n\t// };\n\n\thandelError = (error) => {\n\t\tconsole.error('got an error', error);\n\t};\n}\n"],"file":"client.js"}